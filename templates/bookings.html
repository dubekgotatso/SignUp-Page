<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bookings</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/bookings.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<nav>
    <ul>
        <li><a href="/homepage">Home</a></li>
        <li><a href="/about">About</a></li>
        <li><a href="review">Reviews</a></li>
        <li><a href="#" onclick="gotoLandingPage1('')">Bookings</a></li>
        <li class="dropdown"><a href="#">
            <span>Services</span>
            <div class="dropdown-content">
                <b><a href="/FadeWaveCut">Fade Wave Cuts</a></b>
                <b><a href="/BobCuts">BobCuts</a></b>
                <b><a href="/BrushWaveCut ">Brush Wave Cut</a></b>
                <b><a href="/StyleCutDye">Style Cut Dye</a></b>
                <b><a href="/TopDyeHairCut">Top Dye Hair Cut</a></b>
                <b><a href="/FadeCutFluffyDye">Fade Cut Fluffy Dye</a></b>
                <b><a href="/DoubleDyeFade ">Double Dye Fade</a></b>
                <b><a href="/DyeCurlyCuts">Dye Curly Cuts</a></b>
            </div>
        </a></li>
    </ul>
</nav>
<br><br>

<br><br><br>
<table border="1">
    <thead>
    <tr>
        <th>Categories</th>
        <th>Date</th>
        <th>Time</th>
        <th>Update</th>
        <th>Cancel</th>
    </tr>
    </thead>
    {% for booking in booking %}
    <tr>
        <td>{{ booking.categories }}</td>
        <td>{{ booking.date }}</td>
        <td>{{ booking.time }}</td>
        <td>
            <form action="/Edit_booking1" method="post">
                <input type="hidden" id="booking_id" name="booking_id" value={{booking._id}}>
                <input type="hidden" id="categories" name="categories" value={{booking.categories}}>
                <input type="hidden" id="date" name="date" value={{booking.date}}>
                <input type="hidden" id="time" name="time" value={{booking.time}}>
                <input type="submit" value="Edit">
            </form>
        </td>
        <td>
            <button type="button" class="btn btn-danger" onclick="confirmCancellation('{{booking._id}}')">Cancel</button>
        </td>
    </tr>
    {% endfor %}
</table>

<!-- Modal -->
<div class="modal fade" id="cancelModal" tabindex="-1" aria-labelledby="cancelModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="cancelModalLabel">Cancel Booking</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Are you sure you want to cancel this booking?
            </div>
            <div class="modal-footer">
                <form id="cancel-form" action="/delete_booking" method="post">
                    <input type="hidden" id="delete_id" name="delete_id">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-danger">Cancel Booking</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
<script src="{{ url_for('static', filename='review.js') }}"></script>
<script>
    function confirmCancellation(bookingId) {
        document.getElementById('delete_id').value = bookingId;
        var cancelModal = new bootstrap.Modal(document.getElementById('cancelModal'));
        cancelModal.show();
    }
</script>
</body>
</html>
